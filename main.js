!function(e,t,i){var n=function(){for(var e=arguments,t=e[0],i=1;i<e.length;++i)for(var n in e[i])e[i].hasOwnProperty(n)&&(t[n]=e[i][n]);return t},s=function(e){var n="classList"in t.body;return{addClass:n?function(e,t){e.classList.add(t)}:function(e,t){this.hasClass(e,t)||(e.className+=" "+t)},addListener:function(){return t.addEventListener&&function(e,t,i,n){e.addEventListener(t,i,n||!1)}||t.attachEvent&&function(e,t,i){e.attachEvent("on"+t,i)}||function(e,t,i){e["on"+t]=i}}(),hasClass:n?function(e,t){return e.classList.contains(t)}:function(e,t){return new RegExp("\\b"+t).exec(e.className)},isEventModified:function(e){return!!(e.ctrlKey||e.metaKey||e.altKey||e.shiftKey)},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeClass:n?function(e,t){e.classList.remove(t)}:function(e,t){e.className=e.className.replace(new RegExp("\\b"+t,"g"),"")},removeListener:function(){var e=t.removeEventListener||t.detachEvent&&function(e,t){this.detachEvent("on"+e,t)}||function(e,t){this["on"+e]===t&&(this["on"+e]=i)};return function(t,i,n,s){return e.call(t,i,n,s||!1)}}()}}(t.body),r={baseClass:function(e){"object"==typeof e&&n(this,e)},create:function(e){e||(e={}),e._parent||(e._parent=this.baseClass);var t=function(){this instanceof t&&(e._init?e._init.apply(this,arguments):e._parent.apply(this,arguments))};return n(t.prototype,e),t}};!function(){if("querySelectorAll"in t){var n=r.create({_init:function(){var e=this;if(e._parent.apply(e,arguments),this._previousTickDiff=[],!e.grid&&e.gridEl){e.grid=[];var i=e.gridEl.querySelectorAll("tbody tr");e.rows||(e.rows=i.length);for(var n=0;n<i.length;++n){var r=[],a=i[n].querySelectorAll(".c");e.columns||(e.columns=a.length);for(var c=0;c<a.length;++c)r.push(new l({el:a[c]}));e.grid.push(r)}}if(e.controlsEl||(e.controlsEl=t.querySelector(".gameControls")),e.previousAction=e.controlsEl.querySelector(".previousTick"),s.addListener(e.previousAction,"click",function(t){e._previousTickDiff.length&&!s.isEventModified(t)&&(s.preventDefault(t),e.decrementTick())}),e.nextAction=e.controlsEl.querySelector(".nextTick"),s.addListener(e.nextAction,"click",function(t){s.isEventModified(t)||(s.preventDefault(t),e.incrementTick())}),e.tick||(e.tick=e.el.getAttribute("data-tick")?parseInt(e.el.getAttribute("data-tick"),10):1),e.tickCountEl||(e.tickCountEl=this.el.querySelector(".tickCount b")),!e.playEl){var o=t.createElement("li");o.innerHTML='<button class="playA">Play</button> ',e.playEl=o.querySelector("button");var u=function(){var t=e.controlsEl;t.parentNode.querySelector(":hover")===t||t.querySelector(":hover")?setTimeout(function(){u()},100):t.insertBefore(o,t.querySelectorAll("li")[0])};u()}e.playEl&&(s.addListener(e.playEl,"click",function(){e.togglePlay()}),e.el.setAttribute("data-playing","stopped"))},columns:i,controlsEl:i,el:i,getAliveNeighborCount:function(e,t){for(var i=0,n=e>0?e-1:e;e+1>=n&&n<this.rows;++n)for(var s=t>0?t-1:t;t+1>=s&&s<this.columns;++s)n===e&&s===t||!this.getCell(n,s).alive||++i;return i},gridEl:i,getCell:function(e,t){return this.grid[e][t]},grid:i,nextAction:i,previousAction:i,rows:i,tick:i,tickCountEl:i,interval:600,isPlaying:!1,playEl:i,togglePlay:function(){var t=this;if(t.isPlaying)t.el.setAttribute("data-playing","stopped"),t.playEl.innerHTML="Play",t._timeout&&e.clearTimeout(t._timeout),t.isPlaying=!1;else{t.el.setAttribute("data-playing","playing"),t.playEl.innerHTML="Stop";var i=function(){t.incrementTick(),t._timeout=e.setTimeout(i,t.interval)};i(),t.isPlaying=!0}},_timeout:i,_previousTickDiff:i,_applyTickDiff:function(e){for(var t=0;t<e.length;++t)e[t].switchAlive()},setTick:function(t){this.tick=e.parseInt(t,10),this.tickCountEl&&(this.tickCountEl.innerHTML=this.tick)},decrementTick:function(){var e=this;e.isTicking||(e._previousTickDiff.length?(e.isTicking=!0,e._applyTickDiff(e._previousTickDiff.pop()),e.setTick(e.tick-1),e.isTicking=!1):alert("There are no more previous ticks."))},incrementTick:function(){var e=this;if(!e.isTicking){e.isTicking=!0;for(var t=[],i=0;i<e.rows;++i)for(var n=0;n<e.columns;++n){var s=e.getCell(i,n),r=e.getAliveNeighborCount(i,n);(s.alive?2!==r&&3!==r:3===r)&&t.push(s)}e._applyTickDiff(t),e._previousTickDiff.push(t),e.setTick(e.tick+1),e.isTicking=!1}},isTicking:!1}),l=r.create({_init:function(){this._parent.apply(this,arguments),"undefined"==typeof this.alive&&this.el&&(this.alive=s.hasClass(this.el,"alive")),this.el&&!this.abbrEl&&(this.abbrEl=this.el.querySelector("abbr"))},abbrEl:i,alive:i,setAlive:function(e){e!==this.alive&&(this.alive=e,this.el&&(e?(s.addClass(this.el,"alive"),s.removeClass(this.el,"dead"),this.abbrEl&&(this.abbrEl.title="alive",this.abbrEl.innerHTML="O")):(s.removeClass(this.el,"alive"),s.addClass(this.el,"dead"),this.abbrEl&&(this.abbrEl.title="dead",this.abbrEl.innerHTML="X"))))},switchAlive:function(){return this.setAlive(!this.alive)},el:i}),a=t.querySelector(".game");if(a){new n({el:a,gridEl:t.getElementById("grid")})}}}(),function(){if("querySelectorAll"in t&&"onhashchange"in e){var n=r.create({_init:function(){var t=this;t._parent.apply(t,arguments),s.addListener(e,"hashchange",function(){t.checkHash()}),t.checkHash()},checkHash:function(){var i=this,n=e.location.hash.replace(/^#/,"");if(n){for(var r=!1,l=0;l<i.els.length;++l)i.els[l].id===n&&(r=!0);r?(i.isOpen=i.isListeningForEscape=!0,s.addListener(t.body,"keyup",i.getEscapeListener())):i.close()}else i.close()},close:function(){var i=this;i.isOpen&&(i.isOpen=!1,e.location.hash="#"),i.isListeningForEscape&&i._escapeListener&&(i.isListeningForEscape=!1,s.removeListener(t.body,"keyup",i._escapeListener))},els:i,_escapeListener:i,getEscapeListener:function(){var e=this;return e._escapeListener||(e._escapeListener=function(t){var i=!1;i="key"in t?"Escape"===t.key||"Esc"===t.key:27===t.keyCode,i&&e.close()}),e._escapeListener},isOpen:!1,isListeningForEscape:!1}),l=t.querySelectorAll(".pane");l&&l.length&&new n({els:l})}}()}(window,window.document);
